<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/developers-blog/styles.93a88c79ea3aeb65bebd.css">code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.wrapper{box-sizing:border-box;max-width:1200px;margin:0 auto}.container-fluid{margin-right:auto;margin-left:auto;padding-right:2rem;padding-left:2rem}.row{box-sizing:border-box;display:-moz-flex;display:flex;-moz-flex:0 1 auto;flex:0 1 auto;-moz-flex-direction:row;flex-direction:row;flex-wrap:wrap;margin-right:-.5rem;margin-left:-.5rem}.row.reverse{-moz-flex-direction:row-reverse;flex-direction:row-reverse}.col.reverse{-moz-flex-direction:column-reverse;flex-direction:column-reverse}.col-xs{flex-basis:auto}.col-xs,.col-xs-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-1{flex-basis:8.33333%;max-width:8.33333%}.col-xs-2{flex-basis:16.66667%;max-width:16.66667%}.col-xs-2,.col-xs-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-3{flex-basis:25%;max-width:25%}.col-xs-4{flex-basis:33.33333%;max-width:33.33333%}.col-xs-4,.col-xs-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-5{flex-basis:41.66667%;max-width:41.66667%}.col-xs-6{flex-basis:50%;max-width:50%}.col-xs-6,.col-xs-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-7{flex-basis:58.33333%;max-width:58.33333%}.col-xs-8{flex-basis:66.66667%;max-width:66.66667%}.col-xs-8,.col-xs-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-9{flex-basis:75%;max-width:75%}.col-xs-10{flex-basis:83.33333%;max-width:83.33333%}.col-xs-10,.col-xs-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-11{flex-basis:91.66667%;max-width:91.66667%}.col-xs-12{flex-basis:100%;max-width:100%}.col-xs-12,.col-xs-offset-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-offset-1{margin-left:8.33333%}.col-xs-offset-2{margin-left:16.66667%}.col-xs-offset-2,.col-xs-offset-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-offset-3{margin-left:25%}.col-xs-offset-4{margin-left:33.33333%}.col-xs-offset-4,.col-xs-offset-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-offset-5{margin-left:41.66667%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-6,.col-xs-offset-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-offset-7{margin-left:58.33333%}.col-xs-offset-8{margin-left:66.66667%}.col-xs-offset-8,.col-xs-offset-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-offset-9{margin-left:75%}.col-xs-offset-10{margin-left:83.33333%}.col-xs-offset-10,.col-xs-offset-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-xs-offset-11{margin-left:91.66667%}.col-xs-offset-12{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem;margin-left:100%}.col-xs{-moz-flex-grow:1;flex-grow:1;flex-basis:0;max-width:100%}.start-xs{-moz-justify-content:flex-start;justify-content:flex-start;text-align:start}.center-xs{-moz-justify-content:center;justify-content:center;text-align:center}.end-xs{-moz-justify-content:flex-end;justify-content:flex-end;text-align:end}.top-xs{-moz-align-items:flex-start;align-items:flex-start}.middle-xs{-moz-align-items:center;align-items:center}.bottom-xs{-moz-align-items:flex-end;align-items:flex-end}.around-xs{-moz-justify-content:space-around;justify-content:space-around}.between-xs{-moz-justify-content:space-between;justify-content:space-between}.first-xs{order:-1}.last-xs{order:1}@media only screen and (min-width:48em){.container{width:46rem}.col-sm{flex-basis:auto}.col-sm,.col-sm-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-1{flex-basis:8.33333%;max-width:8.33333%}.col-sm-2{flex-basis:16.66667%;max-width:16.66667%}.col-sm-2,.col-sm-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-3{flex-basis:25%;max-width:25%}.col-sm-4{flex-basis:33.33333%;max-width:33.33333%}.col-sm-4,.col-sm-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-5{flex-basis:41.66667%;max-width:41.66667%}.col-sm-6{flex-basis:50%;max-width:50%}.col-sm-6,.col-sm-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-7{flex-basis:58.33333%;max-width:58.33333%}.col-sm-8{flex-basis:66.66667%;max-width:66.66667%}.col-sm-8,.col-sm-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-9{flex-basis:75%;max-width:75%}.col-sm-10{flex-basis:83.33333%;max-width:83.33333%}.col-sm-10,.col-sm-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-11{flex-basis:91.66667%;max-width:91.66667%}.col-sm-12{flex-basis:100%;max-width:100%}.col-sm-12,.col-sm-offset-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-offset-1{margin-left:8.33333%}.col-sm-offset-2{margin-left:16.66667%}.col-sm-offset-2,.col-sm-offset-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-offset-3{margin-left:25%}.col-sm-offset-4{margin-left:33.33333%}.col-sm-offset-4,.col-sm-offset-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-offset-5{margin-left:41.66667%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-6,.col-sm-offset-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-offset-7{margin-left:58.33333%}.col-sm-offset-8{margin-left:66.66667%}.col-sm-offset-8,.col-sm-offset-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-offset-9{margin-left:75%}.col-sm-offset-10{margin-left:83.33333%}.col-sm-offset-10,.col-sm-offset-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-sm-offset-11{margin-left:91.66667%}.col-sm-offset-12{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem;margin-left:100%}.col-sm{-moz-flex-grow:1;flex-grow:1;flex-basis:0;max-width:100%}.start-sm{-moz-justify-content:flex-start;justify-content:flex-start;text-align:start}.center-sm{-moz-justify-content:center;justify-content:center;text-align:center}.end-sm{-moz-justify-content:flex-end;justify-content:flex-end;text-align:end}.top-sm{-moz-align-items:flex-start;align-items:flex-start}.middle-sm{-moz-align-items:center;align-items:center}.bottom-sm{-moz-align-items:flex-end;align-items:flex-end}.around-sm{-moz-justify-content:space-around;justify-content:space-around}.between-sm{-moz-justify-content:space-between;justify-content:space-between}.first-sm{order:-1}.last-sm{order:1}}@media only screen and (min-width:62em){.container{width:61rem}.col-md{flex-basis:auto}.col-md,.col-md-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-1{flex-basis:8.33333%;max-width:8.33333%}.col-md-2{flex-basis:16.66667%;max-width:16.66667%}.col-md-2,.col-md-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-3{flex-basis:25%;max-width:25%}.col-md-4{flex-basis:33.33333%;max-width:33.33333%}.col-md-4,.col-md-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-5{flex-basis:41.66667%;max-width:41.66667%}.col-md-6{flex-basis:50%;max-width:50%}.col-md-6,.col-md-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-7{flex-basis:58.33333%;max-width:58.33333%}.col-md-8{flex-basis:66.66667%;max-width:66.66667%}.col-md-8,.col-md-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-9{flex-basis:75%;max-width:75%}.col-md-10{flex-basis:83.33333%;max-width:83.33333%}.col-md-10,.col-md-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-11{flex-basis:91.66667%;max-width:91.66667%}.col-md-12{flex-basis:100%;max-width:100%}.col-md-12,.col-md-offset-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-offset-1{margin-left:8.33333%}.col-md-offset-2{margin-left:16.66667%}.col-md-offset-2,.col-md-offset-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-offset-3{margin-left:25%}.col-md-offset-4{margin-left:33.33333%}.col-md-offset-4,.col-md-offset-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-offset-5{margin-left:41.66667%}.col-md-offset-6{margin-left:50%}.col-md-offset-6,.col-md-offset-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-offset-7{margin-left:58.33333%}.col-md-offset-8{margin-left:66.66667%}.col-md-offset-8,.col-md-offset-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-offset-9{margin-left:75%}.col-md-offset-10{margin-left:83.33333%}.col-md-offset-10,.col-md-offset-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-md-offset-11{margin-left:91.66667%}.col-md-offset-12{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem;margin-left:100%}.col-md{-moz-flex-grow:1;flex-grow:1;flex-basis:0;max-width:100%}.start-md{-moz-justify-content:flex-start;justify-content:flex-start;text-align:start}.center-md{-moz-justify-content:center;justify-content:center;text-align:center}.end-md{-moz-justify-content:flex-end;justify-content:flex-end;text-align:end}.top-md{-moz-align-items:flex-start;align-items:flex-start}.middle-md{-moz-align-items:center;align-items:center}.bottom-md{-moz-align-items:flex-end;align-items:flex-end}.around-md{-moz-justify-content:space-around;justify-content:space-around}.between-md{-moz-justify-content:space-between;justify-content:space-between}.first-md{order:-1}.last-md{order:1}}@media only screen and (min-width:75em){.container{width:71rem}.col-lg{flex-basis:auto}.col-lg,.col-lg-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-1{flex-basis:8.33333%;max-width:8.33333%}.col-lg-2{flex-basis:16.66667%;max-width:16.66667%}.col-lg-2,.col-lg-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-3{flex-basis:25%;max-width:25%}.col-lg-4{flex-basis:33.33333%;max-width:33.33333%}.col-lg-4,.col-lg-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-5{flex-basis:41.66667%;max-width:41.66667%}.col-lg-6{flex-basis:50%;max-width:50%}.col-lg-6,.col-lg-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-7{flex-basis:58.33333%;max-width:58.33333%}.col-lg-8{flex-basis:66.66667%;max-width:66.66667%}.col-lg-8,.col-lg-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-9{flex-basis:75%;max-width:75%}.col-lg-10{flex-basis:83.33333%;max-width:83.33333%}.col-lg-10,.col-lg-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-11{flex-basis:91.66667%;max-width:91.66667%}.col-lg-12{flex-basis:100%;max-width:100%}.col-lg-12,.col-lg-offset-1{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-offset-1{margin-left:8.33333%}.col-lg-offset-2{margin-left:16.66667%}.col-lg-offset-2,.col-lg-offset-3{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-offset-3{margin-left:25%}.col-lg-offset-4{margin-left:33.33333%}.col-lg-offset-4,.col-lg-offset-5{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-offset-5{margin-left:41.66667%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-6,.col-lg-offset-7{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-offset-7{margin-left:58.33333%}.col-lg-offset-8{margin-left:66.66667%}.col-lg-offset-8,.col-lg-offset-9{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-offset-9{margin-left:75%}.col-lg-offset-10{margin-left:83.33333%}.col-lg-offset-10,.col-lg-offset-11{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem}.col-lg-offset-11{margin-left:91.66667%}.col-lg-offset-12{box-sizing:border-box;-moz-flex-grow:0;flex-grow:0;flex-shrink:0;padding-right:.5rem;padding-left:.5rem;margin-left:100%}.col-lg{-moz-flex-grow:1;flex-grow:1;flex-basis:0;max-width:100%}.start-lg{-moz-justify-content:flex-start;justify-content:flex-start;text-align:start}.center-lg{-moz-justify-content:center;justify-content:center;text-align:center}.end-lg{-moz-justify-content:flex-end;justify-content:flex-end;text-align:end}.top-lg{-moz-align-items:flex-start;align-items:flex-start}.middle-lg{-moz-align-items:center;align-items:center}.bottom-lg{-moz-align-items:flex-end;align-items:flex-end}.around-lg{-moz-justify-content:space-around;justify-content:space-around}.between-lg{-moz-justify-content:space-between;justify-content:space-between}.first-lg{order:-1}.last-lg{order:1}}:root{--font-family:Poppins,sans-serif;--font-family-title:Questrial,sans-serif;--font-family-serif:Lora,serif;--font-normal:400;--font-semibold:500;--font-bold:600;--font-size-normal:14px;--font-size-title-1:50px;--color-background:#0a0a0a;--color-background-secondary:#303f9f;--color-background-tertiary:#141414;--color-background-tertiary-hover:#363636;--color-background-inverted:#fff;--color-text:#fff;--color-text-inverted:#000;--color-primary:#7681ca;--color-secondary:#aaa;--color-bg-card:#141414;--color-smooth:#e2e2e2;--color-dark:#0a0a0a;--shadow:0 1px 2px rgba(0,0,0,0.07),0 2px 4px rgba(0,0,0,0.07),0 4px 8px rgba(0,0,0,0.07),0 8px 16px rgba(0,0,0,0.07);--shadow-hover:0 2px 4px rgba(0,0,0,0.07),0 4px 8px rgba(0,0,0,0.07),0 8px 16px rgba(0,0,0,0.07),0 16px 32px rgba(0,0,0,0.07)}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;box-sizing:border-box}:focus{outline:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration{-webkit-appearance:none;-moz-appearance:none}input[type=search]{-webkit-appearance:none;-moz-appearance:none}audio,canvas,video{display:inline-block;*display:inline;*zoom:1;max-width:100%}audio:not([controls]){display:none;height:0}[hidden]{display:none}html{font-size:100%;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a:focus{outline:thin dotted}a:active,a:hover{outline:0}img{border:0;-ms-interpolation-mode:bicubic}figure,form{margin:0}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0;white-space:normal;*margin-left:-7px}button,input,select,textarea{font-size:100%;margin:0;vertical-align:baseline;*vertical-align:middle}button,input{line-height:normal}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer;*overflow:visible}button[disabled],html input[disabled]{cursor:default}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}button,html,input,select,textarea{color:#222}::selection{background:#b3d4fc;text-shadow:none}img{vertical-align:middle}fieldset{border:0;margin:0;padding:0}textarea{resize:vertical}.chromeframe{margin:.2em 0;background:#ccc;color:#000;padding:.2em 0}a{color:inherit;text-decoration:none}body{background:var(--color-background);font-family:var(--font-family);font-size:var(--font-size-normal);color:var(--color-text)}img{max-width:100%;height:auto}.container{width:100%;max-width:730px;margin:0 auto;padding:0 20px}@font-face{font-family:Poppins;font-style:normal;font-weight:400;font-display:swap;src:local("Poppins Regular"),local("Poppins-Regular"),url(https://fonts.gstatic.com/s/poppins/v8/pxiEyp8kv8JHgFVrJJfecnFHGPc.woff2) format("woff2")}@font-face{font-family:Poppins;font-style:normal;font-weight:500;font-display:swap;src:local("Poppins Medium"),local("Poppins-Medium"),url(https://fonts.gstatic.com/s/poppins/v8/pxiByp8kv8JHgFVrLGT9Z1xlFd2JQEk.woff2) format("woff2")}@font-face{font-family:Poppins;font-style:normal;font-weight:600;font-display:swap;src:local("Poppins Bold"),local("Poppins-Bold"),url(https://fonts.gstatic.com/s/poppins/v8/pxiByp8kv8JHgFVrLCz7Z1xlFd2JQEk.woff2) format("woff2")}@font-face{font-family:Questrial;font-style:normal;font-weight:400;font-display:swap;src:local("Questrial"),local("Questrial-Regular"),url(https://fonts.gstatic.com/s/questrial/v9/QdVUSTchPBm7nuUeVf70viFl.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Lora;font-style:normal;font-weight:400;font-display:swap;src:local("Lora Regular"),local("Lora-Regular"),url(https://fonts.gstatic.com/s/lora/v14/0QIvMX1D_JOuMwr7I_FMl_E.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}@font-face{font-family:Lora;font-style:normal;font-weight:600;font-display:swap;src:local("Lora Bold"),local("Lora-Bold"),url(https://fonts.gstatic.com/s/lora/v14/0QIgMX1D_JOuO7HeNtxumtus-7w.woff2) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}.a-block:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0}.title-1{font-family:var(--font-family-title);font-size:var(--font-size-title-1);font-weight:var(--font-bold);margin-bottom:50px}.post{font-size:20px;line-height:1.58;font-family:var(--font-family-serif);font-weight:var(--font-normal)}.post blockquote,.post code,.post h1,.post h2,.post h3,.post h4,.post h5,.post h6,.post ol,.post p,.post table,.post ul{margin-top:2em}.post blockquote:first-child,.post code:first-child,.post h1:first-child,.post h2:first-child,.post h3:first-child,.post h4:first-child,.post h5:first-child,.post h6:first-child,.post ol:first-child,.post p:first-child,.post table:first-child,.post ul:first-child{margin-top:0}.post h1,.post h2,.post h3,.post h4,.post h5,.post h6{font-family:var(--font-family-title)}.post h1+p,.post h1+ul,.post h2+p,.post h2+ul,.post h3+p,.post h3+ul,.post h4+p,.post h4+ul,.post h5+p,.post h5+ul,.post h6+p,.post h6+ul{margin-top:10px}.post h1,.post h2{font-size:40px}.post h3{font-size:32px}.post h4{font-size:28px}.post b,.post strong{font-weight:700}.post em,.post i{font-style:italic}.post a:link{position:relative;border-bottom:1px solid var(--color-text);z-index:1;-webkit-transition:border .2s;transition:border .2s}.post a:link:hover{border-bottom:1px solid var(--color-primary)}.post table{background:var(--color-bg-card);border-radius:10px;font-size:16px;width:100%}.post table td,.post table th{padding:10px 15px;border:1px solid var(--color-background)}.post table th{background:var(--color-background-secondary)}.post table th:first-child{border-top-left-radius:10px}.post table th:last-child{border-top-right-radius:10px}.post code{background:var(--color-bg-card);color:var(--color-primary);font-family:monospace;border-radius:2px;font-style:normal}.post code:after,.post code:before{content:"";display:inline-block;width:5px}.post pre,.post pre[class*=language-]{font-family:monospace;background:var(--color-bg-card);padding:10px;border-radius:10px;margin-top:2em;font-size:14px}.post pre[class*=language-] code,.post pre code{color:var(--color-text)}.post pre[class*=language-] code:after,.post pre[class*=language-] code:before,.post pre code:after,.post pre code:before{content:none}.post img{display:block;margin:0 auto}.post blockquote{padding:0 0 0 20px;font-style:italic;border-left:2px solid var(--color-primary);color:var(--color-secondary)}.post li{position:relative;padding-left:25px}.post li:before{content:"";display:block;position:absolute;top:12px;left:0;height:8px;width:8px;background:var(--color-primary);border:1px solid var(--color-primary);border-radius:8px}.post li li:before{background:none}.post li li li:before{height:5px;width:5px;background:var(--color-primary);border-radius:0}.author{display:flex;align-items:center}.author_profile{display:block;margin-right:20px;border-radius:10px;overflow:hidden;width:60px;height:60px;flex-shrink:0}.author_name{display:block;font-size:18px;font-weight:var(--font-bold);font-family:var(--font-family-title)}@media screen and (min-width:1024px){.author_name{font-size:24px}}.author_username{display:block;margin-top:5px;font-size:14px}@media screen and (min-width:1024px){.author_username{font-size:20px}}.tag:not(.token){display:inline-flex;align-items:center;font-weight:var(--font-semibold)}.tag:not(.token) .icon{width:15px;height:15px;margin-right:5px;color:inherit}.tag:not(.token)+.tag{margin-left:20px}.icon_svg{width:100%;height:100%}.reactions{display:flex;width:100%;border-radius:5px;padding:0 15px;background:var(--color-background-tertiary);color:var(--color-text)}.reactions_item{display:flex;align-items:center;justify-content:center}.reactions_item--empty{color:var(--color-secondary)}.reactions_item+.reactions_item{margin-left:20px}.reactions_number{margin-left:5px}.reactions_add{background:none;border:none;padding:10px 0}.reactions_add .icon{display:block;width:24px;height:15px;color:var(--color-secondary);-webkit-transition:color .2s;transition:color .2s}.reactions_add:hover .icon{color:var(--color-text)}.post-page_cover{display:flex;position:relative;width:100%;height:400px;align-items:center;justify-content:center;background-size:cover}.post-page_cover:before{content:"";display:block;position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(0,0,0,.5);z-index:0}.post-page_cover_inner{display:block;position:relative;z-index:2}.post-page_title{margin-bottom:15px}.post-page_excerpt{font-size:20px;line-height:1.2}.post-page_inner{padding-top:60px;padding-bottom:60px}.post-page_tags{display:block}.post-page_tag{display:inline-block;margin-right:10px;margin-top:30px}.post-page_aside{display:block;width:100%;margin-top:60px}.post-page_aside .reactions{margin-bottom:30px}.profile{display:flex;position:relative;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;padding:20px;background:var(--color-background) 50% no-repeat;background-size:cover;color:var(--color-text)}.profile:before{content:"";position:absolute;top:0;left:0;bottom:0;right:0;background:-webkit-gradient(linear,left top,left bottom,from(rgba(10,10,10,0)),to(var(--color-background)));background:linear-gradient(180deg,rgba(10,10,10,0),var(--color-background));z-index:1}.profile>*{z-index:2}@media screen and (min-width:1024px){.profile:before{background:-webkit-gradient(linear,left top,right top,from(rgba(10,10,10,0)),to(var(--color-background)));background:linear-gradient(90deg,rgba(10,10,10,0),var(--color-background))}}.profile_image{display:block;width:110px;height:110px;border-radius:10px;overflow:hidden}@media screen and (min-width:1024px){.profile_image{width:180px;height:180px}}.profile_name{margin-top:30px;font-weight:var(--font-semibold);font-size:16px}@media screen and (min-width:1024px){.profile_name{font-size:24px}}.profile_username{margin-top:8px;font-size:12px}@media screen and (min-width:1024px){.profile_username{font-size:18px}}.profile_profession{margin-top:30px;font-weight:var(--font-semibold);font-size:20px}@media screen and (min-width:1024px){.profile_profession{font-size:26px}}.profile_tags{margin-top:30px}.profile_tag+.profile_tag{margin-top:10px}.cards-list+.cards-list{margin-top:100px}.cards-list_item{margin-bottom:20px}.cards-list_item .card{min-height:100%}.card{display:inline-block;background:var(--color-bg-card);border-radius:5px;color:var(--color-text);box-shadow:var(--shadow);overflow:hidden}.card--padding{padding:50px 30px}.card--link{-webkit-transition:.4s ease-in-out;transition:.4s ease-in-out;-webkit-transform:scale(1);transform:scale(1);cursor:pointer}.card--link:hover{z-index:1;-webkit-transform:scale(1.03);transform:scale(1.03);box-shadow:var(--shadow-hover)}.card_title{font-size:24px;font-weight:var(--font-semibold);word-wrap:break-word;color:inherit}.post-card{display:block;position:relative;max-width:600px}.post-card_inner{padding:50px 30px}.post-card_title+.post-card_description{margin-top:20px}.post-card_image{position:relative;background:var(--color-background) no-repeat 50% 50%;background-size:cover;padding-bottom:50%}.post-card_image .icon{position:absolute;top:calc(50% - 30px);left:calc(50% - 30px);width:60px;height:60px;color:var(--color-smooth)}.project-card{display:block;position:relative;max-width:600px}.project-card_tags,.project-card_title+.project-card_description{margin-top:20px}.index-page .profile{position:fixed;top:0;left:0;right:0;height:60vh}@media screen and (min-width:1024px){.index-page .profile{height:100%;width:30vw}}.index-page_inner{display:block;position:relative;margin-top:60vh;padding:60px 20px;background:var(--color-background);z-index:2}@media screen and (min-width:1024px){.index-page_inner{margin-top:0;margin-left:30vw;padding:60px 40px}}</style><meta name="generator" content="Gatsby 2.19.7"/><link as="script" rel="preload" href="/developers-blog/webpack-runtime-54a613740365f810de56.js"/><link as="script" rel="preload" href="/developers-blog/app-d8dc31c076a3986dbc79.js"/><link as="script" rel="preload" href="/developers-blog/styles-0f7aed513901ea334085.js"/><link as="script" rel="preload" href="/developers-blog/commons-63a37800405c5837f33b.js"/><link as="script" rel="preload" href="/developers-blog/component---src-templates-post-tsx-9a4017382de705e7c725.js"/><link as="fetch" rel="preload" href="/developers-blog/page-data/posts/concevoir-une-api-restful/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div class="layout"><main class="post-page"><header class="post-page_cover" style="background-image:url(&#x27;https://user-images.githubusercontent.com/11388211/75194633-c90c8180-5758-11ea-92ea-3195db8b611f.jpg&#x27;)"><div class="post-page_cover_inner container"><h1 class="post-page_title title-1">Concevoir une API RESTful</h1><p class="post-page_excerpt">Techniques de base pour designer une API, en utilisant le standard REST</p><ul class="post-page_tags"><li class="post-page_tag"><span class="tag"><i class="icon icon-hashtag" title="tag: "><svg class="icon_svg"><use xlink:href="/developers-blog/static/icons-6ba4061d74980cc17b17d496ed161dff.svg#hashtag"></use></svg></i>api</span></li><li class="post-page_tag"><span class="tag"><i class="icon icon-hashtag" title="tag: "><svg class="icon_svg"><use xlink:href="/developers-blog/static/icons-6ba4061d74980cc17b17d496ed161dff.svg#hashtag"></use></svg></i>backend</span></li></ul></div></header><div class="post-page_inner container"><article class="post-page_html post"><h1>Concevoir une API REST</h1>
<p>Pour communiquer entre elles, les applications ont besoin d'un support <strong>bas√© g√©n√©ralement sur HTTP</strong>. C'est une qu'on appelle <strong>une API</strong> ou <strong>un webservice</strong>.</p>
<p>C'est en 2000 que Roy Fielding cr√©e le <strong>standard REST</strong> afin de <strong>normaliser de mani√®re simple ces API</strong> et d'utiliser au maximum le standard HTTP. Cette norme est bas√©e sur 4 niveaux souvent appel√©s &quot;<a href="https://martinfowler.com/articles/richardsonMaturityModel.html">Glory of REST</a>&quot;.</p>
<p>Voyons comment cela se pr√©sente.</p>
<p><img src="https://media.giphy.com/media/JUh0yTz4h931K/giphy.gif" alt="GIF: D√©tective regardant avec une loupe"></p>
<h2>Les ressources</h2>
<p>Une API sert avant tout √† <strong>ex√©cuter des actions sur des ressources</strong> m√©tiers. Il faut donc dans un premier temps <strong>d√©finir ces ressources</strong>.</p>
<blockquote>
<p>Par exemple, si je veux cr√©er une API permettant de g√©rer une biblioth√®que musicale. Mes ressources seront donc : les albums, les artistes et les pistes.</p>
</blockquote>
<p>Les ressources <strong>se pr√©sentent sous la forme d'un objet JSON</strong> et se d√©coupent en plusieurs cat√©gories : les <strong>entit√©s</strong> et les <strong>collections</strong>.</p>
<h3>Entit√© üìï</h3>
<p>Une entit√© est la <strong>repr√©sentation la plus simple d'une ressource</strong>. Elle permet simplement d'en afficher les d√©tails.</p>
<blockquote>
<p>Voici un exemple de repr√©sentation de mon entit√© &quot;album&quot;</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">7291</span><span class="token punctuation">,</span>
  <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"The Groove Sessions"</span><span class="token punctuation">,</span>
  <span class="token property">"year"</span><span class="token operator">:</span> <span class="token number">2007</span><span class="token punctuation">,</span>
  <span class="token property">"artwork"</span><span class="token operator">:</span> <span class="token string">"/path/to/artwork.jpeg"</span><span class="token punctuation">,</span>
  <span class="token property">"artists"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">4523</span><span class="token punctuation">,</span>
      <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Chinese Man"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<h3>Collections üìö</h3>
<p>Une collection est <strong>une liste d'entit√©s</strong>.</p>
<blockquote>
<p>Exemple de la liste de mes albums</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"items"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">7291</span><span class="token punctuation">,</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"The Groove Sessions"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">7745</span><span class="token punctuation">,</span>
      <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Epoch"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"count"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">"limit"</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token property">"total"</span><span class="token operator">:</span> <span class="token number">26</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<p>Comme on peut le voir dans l'exemple, l'avantage de retourner un objet et non directement une liste est la possibilit√© d‚Äôajouter la pagination de notre liste ou des √©l√©ments associ√©s √† celle-ci.</p>
<h3>Erreurs ‚ùå</h3>
<p>Une erreur n'est pas vraiment une ressource r√©elle, mais elle a tout de m√™me un sch√©ma qui est int√©ressant √† travailler.</p>
<p><img src="/img/posts/rest/error.png" alt="- Developpeur : &quot;Mais putain&quot;, - API: &quot;Unknown error. Please try again&quot;"></p>
<p>Comme le montre cette vignette de <a href="http://www.commitstrip.com/fr/2013/07/01/quand-lapi-rend-fou/">CommitStrip.com</a>, il est toujours frustrant pour un d√©veloppeur de ne pas comprendre l'erreur renvoy√©e par le webservice. Il est donc n√©cessaire de renvoyer une erreur correctement format√©e.</p>
<blockquote>
<p>Voyons un exemple d'erreur</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"message"</span><span class="token operator">:</span> <span class="token string">"Album not found"</span><span class="token punctuation">,</span>
  <span class="token property">"status"</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"not_found"</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<h2>Les URI</h2>
<blockquote>
<p>&quot;Un <strong>URI</strong>, de l'anglais <em>Uniform Resource Identifier</em>, soit litt√©ralement <em>identifiant uniforme de ressource</em>, est une courte cha√Æne de caract√®res identifiant une ressource sur un r√©seau.&quot;
-- &lt;cite&gt;<a href="https://fr.wikipedia.org/wiki/Uniform_Resource_Identifier">URI, Wikipedia</a>&lt;/cite&gt;</p>
</blockquote>
<h3>URI = Ressource</h3>
<p>Il est important de garder une r√®gle en t√™te : &quot;<strong>Chaque URI correspond √† une ressource de notre syst√®me et non √† une action</strong>&quot;.</p>
<h4>Collection</h4>
<p>L'URI associ√© √† une liste d'entit√©s (une collection, donc) se pr√©sente sous la forme <code>/entities</code> (avec un <em>s</em> pour mettre en avant la pluralit√© des entit√©s).</p>
<blockquote>
<p>L'URI correspondant √† ma collection d'albums sera donc <code>/albums</code>.</p>
</blockquote>
<h4>Entit√©</h4>
<p>Pour requ√™ter une entit√© il faut garder en t√™te cette phrase : &quot;je requ√™te une entit√© de ma collection&quot;, ainsi, l'URI tombe sous le sens et sera <code>/entities/{entity-id}</code> (on r√©cup√®re un item de la collection, celle-ci garde donc son <em>s</em> pour rester coh√©rente).</p>
<blockquote>
<p>L'URI correspondant √† un album sera <code>/albums/{album-id}</code></p>
</blockquote>
<h4>Le cas des sous-ressources</h4>
<p>Dans certains cas, une ressource est d√©pendante d'une autre, c'est ce que l'on appelle une <strong>sous-ressource</strong>.</p>
<p>L'URI correspondante √† une collection de sous-ressources sera <code>/entities/{entity-id}/sub-resources</code> et pour r√©cup√©rer une entit√© <code>/entities/{entity-id}/sub-resources/{sub-resource-id}</code>.</p>
<blockquote>
<p>Dans l'exemple, on peut se dire que les titres seront les enfants d'un album. On pourra donc avoir ces URI :</p>
<ul>
<li>Collection de pistes d'un album : <code>/albums/{album-id}/tracks</code></li>
<li>Piste (d'une collection de pistes) d'un album : <code>/albums/{album-id}/tracks/{track-id}</code></li>
</ul>
</blockquote>
<h3>Utilisation des param√®tres de requ√™te</h3>
<p>Les param√®tres de requ√™te (appel√©s QueryParams) sont des <strong>param√®tres optionnels</strong> qui s'ajoutent √† la fin de mon URL.</p>
<h4>Rechercher</h4>
<p>Comme Google, on peut utiliser un param√®tre <code>q</code> pour <strong>faire une recherche sur une collection</strong>.</p>
<blockquote>
<p>Pour rechercher les albums on peut faire quelque chose comme <code>/albums?q=Dyna-Mite</code></p>
</blockquote>
<h4>Filtrer</h4>
<p>Les param√®tres permettent √©galement de <strong>filtrer les √©l√©ments d'une collection</strong>. On utilisera g√©n√©ralement l'attribut de la ressource comme cl√©.</p>
<blockquote>
<p>Pour lister les albums d'une ann√©e sp√©cifique on peut pr√©voir un URI comme <code>/albums?year=2007</code></p>
</blockquote>
<h4>Pagination</h4>
<p>On peut paginer simplement une collection comme on le ferait sur un site standard en ajoutant deux param√®tres <code>page</code> permettant d'afficher une page et <code>limit</code> permettant de sp√©cifier le nombre d'items par page.</p>
<blockquote>
<p>Pour paginer mes albums par pas de 10 et s√©lectionner la deuxi√®me page, je ferais certainement quelque chose comme <code>/albums?page=2&amp;limit=10</code></p>
</blockquote>
<p>Il y a d'autres types de pagination, par exemple on peut paginer par gamme et pr√©voir un param√®tre de type <code>range=0-10</code>, etc.</p>
<p>En bref, on peut faire ce que l'on veut üéâ.</p>
<h4>Tri</h4>
<p>Afin de trier une collection, les query params sont la solution par excellence. Il suffit d'ajouter un param√®tre <code>sort</code> et le tour est jouer.</p>
<p><em>Tips: Afin de choisir dans quel ordre trier mes √©l√©ments, j'ajoute un <code>-</code> quand il s'agit d'un ordre d√©croissant.</em></p>
<blockquote>
<p>Pour trier les albums par ann√©es d√©croissantes mon URI sera <code>/albums?sort=-year</code>.</p>
</blockquote>
<h4>Format</h4>
<p>Une API doit pouvoir s'adapter aux besoins des clients (applications, services, etc.). On peut donc leur laisser la main sur les donn√©es dont ils ont besoin et ainsi optimiser le poids des requ√™tes. Ainsi, on ajoute un param√®tre <code>fields</code> pour <strong>lister les champs √† remonter</strong> lors de l'appel.</p>
<blockquote>
<p>Si on veut lister les albums en affichant seulement leur titre, l'URI sera <code>/albums?fields=title</code></p>
</blockquote>
<h2>Les verbes HTTP</h2>
<p>La plupart du temps, un API sert √† afficher, cr√©er, modifier et supprimer des entit√©s de notre application, c'est ce qu'on appelle un <strong>CRUD</strong>.</p>
<blockquote>
<p>&quot;L'acronyme informatique anglais <strong>CRUD</strong> (pour <em>create</em>, <em>read</em>, <em>update</em>, <em>delete</em>) [...] d√©signe les quatre op√©rations de base pour la persistance des donn√©es.&quot;&lt;br&gt;
-- &lt;cite&gt;<a href="https://fr.wikipedia.org/wiki/CRUD">CRUD, Wikipedia</a>&lt;/cite&gt;</p>
</blockquote>
<h3>CRUD</h3>
<p>Pour ce faire, nous allons utiliser <a href="https://developer.mozilla.org/fr/docs/Web/HTTP/M%C3%A9thode"><strong>les verbes que met HTTP √† notre disposition</strong></a>, c'est-√†-dire <strong>GET</strong>, <strong>POST</strong>, <strong>PATCH</strong>, <strong>PUT</strong> et <strong>DELETE</strong>.</p>
<p><img src="https://media.giphy.com/media/dUMyRVhUMmD1m/giphy.gif" alt=""></p>
<p>Voici un petit tableau permettant de comprendre le r√¥le de chaque verbe lorsqu'il est ex√©cut√© sur une entit√© ou une collection.</p>
<table>
<thead>
<tr>
<th>Verbe</th>
<th>Collection</th>
<th>Entit√©</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>Liste les entit√©s</td>
<td>Affiche le d√©tail d'une entit√©</td>
</tr>
<tr>
<td>POST</td>
<td>Cr√©er une entit√©</td>
<td>-</td>
</tr>
<tr>
<td>PATCH</td>
<td>-</td>
<td>Modifie l'entit√©</td>
</tr>
<tr>
<td>DELETE</td>
<td>-</td>
<td>Supprime l'entit√©</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Reprenons notre collection musicale. Voici la liste des actions disponibles pour notre ressource &quot;Albums&quot; :</p>
<ul>
<li><code>GET /albums</code> : R√©cup√®re la liste des albums</li>
<li><code>POST /albums</code> : Ajoute un album √† notre collection</li>
<li><code>GET /albums/{album}</code> : Affiche le d√©tail de l'album</li>
<li><code>PATCH /albums/{album}</code> : Modifie l'album</li>
<li><code>DELETE /albums/{album}</code> : Supprime l'album</li>
</ul>
</blockquote>
<h4>Idempotence</h4>
<p>L'idempotence est le fait que lorsqu'une requ√™te est appel√©e plusieurs fois, le r√©sultat obtenu ne varie pas.</p>
<p>Les verbes <code>GET</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code> sont idempotents. Seul <code>POST</code> ne l'est pas, car il cr√©e une entit√© √† chaque appel.</p>
<p>cf. <a href="https://restfulapi.net/idempotent-rest-apis/">Idempotent REST API</a></p>
<h4><em>PATCH</em> ton <em>POST</em></h4>
<p>Ces deux verbes HTTP permettent d'ajouter un corps (<em>content</em>) √† notre requ√™te. Ce corps sera √©galement un object JSON et repr√©sentera les attributs d'entr√©e de l'objet (ceux utiles √† sa cr√©ation).</p>
<blockquote>
<p>Si nous voulons cr√©er un nouvel album, nous ex√©cuterons cette requ√™te :</p>
<pre class="language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> POST /albums</span>
<span class="token list punctuation">+</span> Request (application/json)
{
    "title": "Lunar Lane",
    "year": "2015"
}

<span class="token list punctuation">+</span> Response 201 (application/json)
{
    "id": 274,
    "title": "Lunar Lane",
    "year": "2015"
}
</code></pre>
<p>Et pour modifier cet album</p>
<pre class="language-markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> PATCH /albums/274</span>
<span class="token list punctuation">+</span> Request (application/json)
{
    "title": "Lunar Lane (Deluxe)",
    "year": "2015"
}

<span class="token list punctuation">+</span> Response 200 (application/json)
{
    "id": 274,
    "title": "Lunar Lane (Deluxe)",
    "year": "2015"
}
</code></pre>
</blockquote>
<h3>Le cas des ressources li√©es</h3>
<p>Afin de lier deux ressources entre elles sans d√©finir pour autant de lien de parent√© j'utilise le verbe <code>PUT</code>.</p>
<blockquote>
<p>Les artistes poss√®dent plusieurs albums, on va donc lier un artiste √† un album (ce choix est arbitraire) :</p>
<ul>
<li><code>GET /artists/{artist}/albums</code> : Liste les albums li√©s √† un artiste</li>
<li><code>PUT /artists/{artist}/albums/{album}</code> : Lie l'album √† l'artiste</li>
<li><code>DELETE /artists/{artist}/albums/{album}</code> : Supprime uniquement la liaison entre l'album et l'artiste</li>
</ul>
</blockquote>
<h3>Actions particuli√®res</h3>
<p>Bien s√ªr <strong>certaines actions ne se r√©sument pas aux simples CRUD</strong>. Dans ce cas, il est n√©cessaire de faire un <strong>URI particulier en y ajoutant un verbe</strong>.</p>
<p><img src="https://media.giphy.com/media/SqmkZ5IdwzTP2/giphy.gif" alt="WHAT?!?"></p>
<p>Oui, au d√©but de mon article je vous ai dit &quot;pas de verbes&quot;, mais ces actions sont <strong>l'exception qui confirme la r√®gle</strong>.</p>
<p>Bien s√ªr, il faut avant tout essayer de faire rentrer cette action dans un des verbes HTTP. Cette nouvelle URL sera <strong>forc√©ment appel√©e en POST</strong>.</p>
<blockquote>
<p>Par exemple, si je veux lire une piste d'un album, je n'ai pas de verbe HTTP qui correspondrait... Je vais donc <strong>exceptionnellement</strong> cr√©er cette action :</p>
<pre><code>POST /albums/{album-id}/tracks/{track-id}/play
</code></pre>
</blockquote>
<h2>Les &quot;status code&quot;</h2>
<p><img src="https://www.commitstrip.com/wp-content/uploads/2018/08/Strip-Response-code-650-final.jpg" alt=""></p>
<p>Comme le montre tr√®s bien cette planche de l'excellent <a href="http://www.commitstrip.com/fr/2018/08/24/http-headers-ftw/">CommitStrip.com</a>, en plus de retourner un <a href="#erreurs-">format d'erreur</a> correct il est important d'<strong>utiliser les status codes correspondants</strong>.</p>
<blockquote>
<p>Un des <em>status code</em> le plus connu est 404, que l'on croise r√©guli√®rement, mais qu'en est-il des <a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">autres</a> ?</p>
</blockquote>
<p>L'id√©e n'est pas de vous lister un √† un l'int√©gralit√© des <em>status codes</em>, mais de vous montrer les plus utilis√©s et les plus subtiles.</p>
<p>Ceux-ci ce d√©coupent en 4 cat√©gories : <strong>1xx</strong>, <strong>2xx</strong>, <strong>3xx</strong>, <strong>4xx</strong> et <strong>5xx</strong>. <em>On ne va pas parler des erreurs de type 1xx, qui n'ont pas grand int√©r√™t pour ma part.</em></p>
<p>Allez, pour rendre le tout plus fun, ces codes seront illustr√©s par <a href="https://http.cat/">des chats</a> (c'est cadeau üéÅ).</p>
<h3>2xx : <em>Tout va bien</em></h3>
<p><img src="https://http.cat/204" alt="200 - OK"></p>
<p>Les statuts 2xx sont retourn√©s par le serveur quand <strong>tout s'est bien pass√©</strong>.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Erreur</th>
<th>Cas d'usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td><em>OK</em></td>
<td>Il est utilis√© pour <strong>tous les retours d'une API qui se passe bien</strong> et qui ne rentre pas dans les cas suivants.</td>
</tr>
<tr>
<td>201</td>
<td><em>Created</em></td>
<td>Il est utilis√© lors d'<strong>un retour positif de cr√©ation</strong> (POST) ou de liaison (PUT) d'une ressource.</td>
</tr>
<tr>
<td>204</td>
<td><em>No Content</em></td>
<td>Il est utilis√© √† la suite d'<strong>une r√©ussite de suppression</strong> (DELETE). <em>Le corps de la r√©ponse doit √™tre vide.</em></td>
</tr>
<tr>
<td>206</td>
<td><em>Partial Content</em></td>
<td>Il est utilis√© lorsque la collection retourn√©e n'est pas compl√®te. <em>Si la collection contient 2 pages, la premi√®re appel√©e retournera un statut 206 et la deuxi√®me un statut 200.</em></td>
</tr>
</tbody>
</table>
<h3>3xx : <em>Regarde ailleurs</em></h3>
<p><img src="https://http.cat/301" alt="301 - Move Permanently"></p>
<p>Les status 3xx sont retourn√©es lorsque la ressource est √† retrouver ailleurs (dans une autre URL, dans le cache, etc.).</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Erreur</th>
<th>Cas d'usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>301</td>
<td><em>Moved Permanently</em></td>
<td>Il est utilis√© lorsque <strong>la ressource a √©t√© d√©plac√©e</strong>. Il est accompagn√© d'un header <code>Location: {URL de la ressource}</code></td>
</tr>
<tr>
<td>304</td>
<td><em>Not Modified</em></td>
<td>Il est utilis√© pour dire au client que <strong>la ressource n'a pas √©t√© modifi√©e depuis son dernier appel</strong>. <em>La ressource ne sera pas renvoy√©e, le client prendra donc par d√©faut l'entit√© en cache.</em></td>
</tr>
</tbody>
</table>
<h3>4xx : <em>Tu t'es plant√©</em></h3>
<p><img src="https://http.cat/404" alt="404 - Not Found"></p>
<p>Les statuts 4xx sont renvoy√©s lorsque le client de l'API a fait une erreur ou ne peut pas acc√©der √† la ressource.</p>
<p>Ces erreurs seront <strong>toujours accompagn√©es d'un objet &quot;erreur&quot;</strong> (vu pr√©c√©demment).</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Erreur</th>
<th>Cas d'usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>400</td>
<td><em>Bad Request</em></td>
<td>Il est utilis√© lorsque le contenu de <strong>la requ√™te ne correspond pas √† ce qui est demand√©</strong>. <em>Lors de la cr√©ation d'une entit√©, si un champ est mal renseign√© par exemple.</em></td>
</tr>
<tr>
<td>401</td>
<td><em>Unauthorized</em></td>
<td>Il est utilis√© lorsque <strong>le client n'a pas acc√®s √† la ressource</strong>, car il doit sp√©cifier un toque ou une cl√© d'API.</td>
</tr>
<tr>
<td>403</td>
<td><em>Forbidden</em></td>
<td>Il est utilis√© lorsque <strong>le client n'a pas acc√®s √† la ressource</strong>. La subtile diff√©rence avec la 401 r√©side dans le fait que m√™me si le client renseigne un toque ou une cl√© d'API valide, la ressource lui sera toujours refus√©e.</td>
</tr>
<tr>
<td>404</td>
<td><em>Not Found</em></td>
<td>Dois-je r√©ellement vous l'expliquer ? Il est utilis√© lorsqu'<strong>une ressource est introuvable</strong>.</td>
</tr>
<tr>
<td>409</td>
<td><em>Conflict</em></td>
<td>Il est, par exemple, utilis√© lorsque deux ressources sont d√©j√† li√©es entre-elles suite √† un PUT.</td>
</tr>
</tbody>
</table>
<h3>5xx : <em>Je me suis plant√©</em></h3>
<p><img src="https://http.cat/500" alt="500 - Internal Server Error"></p>
<p>Les status 5xx sont retourn√©es lorsque le serveur a un probl√®me.</p>
<p>Ces erreurs seront <strong>toujours accompagn√©es d'un objet &quot;erreur&quot;</strong> (vu pr√©c√©demment).</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Erreur</th>
<th>Cas d'usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>500</td>
<td><em>Internal Server Error</em></td>
<td>Lorsque le script ne se d√©roule pas correctement, mais que le client n'y est pour rien.</td>
</tr>
</tbody>
</table>
<h2>Exemple</h2>
<p>Comme je vous trouve sympas, je vous donne la documentation compl√®te de l'API d'exemple : <a href="https://musicapi7.docs.apiary.io/#">Music API</a>.</p>
<p>Pour cette documentation, j'ai utilis√© <a href="https://apiblueprint.org/">API BluePrint</a>, un langage bas√© sur Markdown, mais ax√© Rest (je vous ferais un petit article √† ce sujet, c'est promis üòâ).</p>
<p><img src="https://media.giphy.com/media/3o85xwxr06YNoFdSbm/giphy.gif" alt="You're Welcome"></p>
<h2>Glory of REST</h2>
<p>Certains formats de ressources permettent d'aller plus loin et d'am√©liorer l'exp√©rience d√©veloppeur lors des appels API. Je ne vais pas m'attarder sur ces formats, mon but est simplement de vous faire une petite introduction et vous donner envie d'aller plus loin.</p>
<h3>HATEOAS</h3>
<p>HATEOAS, <em>Hypermedia As The Engine Of Application State</em>, permet de formaliser les ressources de la m√™me mani√®re qu'on le ferait en HTML : <strong>en cr√©ant des liens entres-elles</strong>. Cela permet de <strong>naviguer dans l'API sans conna√Ætre sa documentation</strong>, mais uniquement son point d'entr√©e.</p>
<blockquote>
<p>Reprenons mon exemple. Voici ce que donnerait un r√©sultat d'album en HATEOAS :</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"628"</span><span class="token punctuation">,</span>
    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"The Groove Sessions"</span><span class="token punctuation">,</span>
    <span class="token property">"artists"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Chinese Man"</span><span class="token punctuation">,</span>
            <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">"rel"</span><span class="token operator">:</span> <span class="token string">"self"</span><span class="token punctuation">,</span>
                    <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"/artists/4"</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
  	<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"year"</span><span class="token operator">:</span> <span class="token string">"2007"</span><span class="token punctuation">,</span>
    <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token string">"1535021696"</span><span class="token punctuation">,</span>
    <span class="token property">"links"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">"rel"</span><span class="token operator">:</span> <span class="token string">"list"</span><span class="token punctuation">,</span>
            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"/albums"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">"rel"</span><span class="token operator">:</span> <span class="token string">"self"</span><span class="token punctuation">,</span>
            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"/albums/628"</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">"rel"</span><span class="token operator">:</span> <span class="token string">"tracks"</span><span class="token punctuation">,</span>
            <span class="token property">"href"</span><span class="token operator">:</span> <span class="token string">"/albums/628/tracks"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<h3>JSON Schema</h3>
<p>Le but ici est de <strong>documenter notre API</strong> en utilisant un sch√©ma. C'est tr√®s utile pour tester que le retour d'une API est conforme √† sa documentation, mais aussi pour cr√©er les mod√®les dans notre langage de programmation pr√©f√©r√©.</p>
<blockquote>
<p>Dans mon exemple d'API, un album se pr√©sente comme ceci :</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"$schema"</span><span class="token operator">:</span> <span class="token string">"http://json-schema.org/draft-04/schema#"</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
  <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"artists"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"array"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"year"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"created_at"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<h3>JSONLD</h3>
<p>√Ä la mani√®re du JSON Sch√©ma, le but est de d√©crire nos ressources, mais cette fois-ci dans des <strong>sch√©mas standardis√©s</strong>.</p>
<blockquote>
<p>Prenons l'exemple de la documentation. Si la ressource est une personne, je ne vais pas r√©inventer les informations d'une personne, donc je peux directement utiliser un sch√©ma standard de Personne : <a href="https://json-ld.org/contexts/person.jsonld">https://json-ld.org/contexts/person.jsonld</a>.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"@context"</span><span class="token operator">:</span> <span class="token string">"https://json-ld.org/contexts/person.jsonld"</span><span class="token punctuation">,</span>
  <span class="token property">"@id"</span><span class="token operator">:</span> <span class="token string">"http://dbpedia.org/resource/John_Lennon"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John Lennon"</span><span class="token punctuation">,</span>
  <span class="token property">"born"</span><span class="token operator">:</span> <span class="token string">"1940-10-09"</span><span class="token punctuation">,</span>
  <span class="token property">"spouse"</span><span class="token operator">:</span> <span class="token string">"http://dbpedia.org/resource/Cynthia_Lennon"</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<h2>Pour aller plus loin</h2>
<p>Et voil√†, vous voyez ce n'est pas tr√®s complexe !</p>
<p><img src="https://media.giphy.com/media/zcCGBRQshGdt6/giphy.gif" alt="GIF: ... That was easy !"></p>
<p>Maintenant, si vous √™tes dev back, vous n'aurez plus aucune excuse pour oublier un status code. Et si vous √™tes dev front, partagez cet article √† votre dev back !</p>
<p>Comme toujours, je vous mets quelques liens que je trouve int√©ressants √† ce sujet :</p>
<ul>
<li><a href="https://www.restapitutorial.com/">A RESTful Tutorial</a> (en anglais)</li>
<li><a href="https://blog.octo.com/wp-content/uploads/2014/12/OCTO-Refcard_API_Design_EN_3.0.pdf">Quick Card Reference</a> (PDF, en anglais)</li>
<li><a href="http://putaindecode.io/fr/articles/api/hateoas/">HATEOAS, le Graal des d√©veloppeurs d'API</a> (en fran√ßais)</li>
<li><a href="https://musicapi7.docs.apiary.io">Exemple d'API</a> (en anglais)</li>
</ul>
<p>N'h√©sitez pas √† <strong>partager cet article</strong> et envoyer <strong>vos questions ou vos ressources en commentaires</strong> !</p>
<p><img src="https://media.giphy.com/media/l1J3CbFgn5o7DGRuE/giphy.gif" alt="GIF: See You Soon!"></p>
<p>√Ä bient√¥t ! Q.</p>
</article><aside class="post-page_aside"><ul class="reactions"><li class="reactions_item reactions_item--empty">No reaction</li><li class="reactions_item"><a aria-label="Add your reaction on GitHub" href="https://github.com/qmachard/developers-blog/issues/10" class="reactions_add" target="_blank" rel="noopener noreferrer"><i class="icon icon-add-emoji" title="Adding reaction"><svg class="icon_svg"><use xlink:href="/developers-blog/static/icons-6ba4061d74980cc17b17d496ed161dff.svg#add-emoji"></use></svg></i></a></li></ul><div class="author"><img class="author_profile" src="https://avatars1.githubusercontent.com/u/11388211?v=4" alt="Quentin Machard"/><div class="author_inner"><span class="author_name">Quentin Machard</span><a href="https://github.com/qmachard" class="author_username">@<!-- -->qmachard</a></div></div></aside></div></main></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/concevoir-une-api-restful";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d8dc31c076a3986dbc79.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-9a4017382de705e7c725.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-5cad5c285b5252b7d852.js"]};/*]]>*/</script><script src="/developers-blog/component---src-templates-post-tsx-9a4017382de705e7c725.js" async=""></script><script src="/developers-blog/commons-63a37800405c5837f33b.js" async=""></script><script src="/developers-blog/styles-0f7aed513901ea334085.js" async=""></script><script src="/developers-blog/app-d8dc31c076a3986dbc79.js" async=""></script><script src="/developers-blog/webpack-runtime-54a613740365f810de56.js" async=""></script></body></html>